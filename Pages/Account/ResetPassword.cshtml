@page "/Account/ResetPassword"
@model CMS2.Pages.Account.ResetPasswordModel
@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="en" dir="ltr" class="light">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password - Task Manager</title>
    <link rel="stylesheet" href="~/css/style.css" />

    <script>
        function togglePassword(inputId, iconId) {
            const input = document.getElementById(inputId);
            const icon = document.getElementById(iconId);

            if (input.type === "password") {
                input.type = "text";
                icon.innerHTML = `<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24"
                            height="1.2em" width="1.2em" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                  d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                            <path stroke-linecap="round" stroke-linejoin="round"
                                  d="M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.543 7
                                      -1.275 4.057-5.065 7-9.543 7-4.478 0-8.268-2.943-9.543-7z"/>
                            </svg>`;
            } else {
                input.type = "password";
                icon.innerHTML = `<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24"
                            height="1.2em" width="1.2em" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                  d="M13.875 18.825A10.05 10.05 0 0112 19
                                     c-4.478 0-8.268-2.943-9.543-7
                                     a9.97 9.97 0 011.563-3.029m5.858.908
                                     a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242
                                     M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29
                                     M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5
                                     c4.478 0 8.268 2.943 9.543 7
                                     a10.025 10.025 0 01-4.132 5.411m0 0L21 21"/>
                            </svg>`;
            }
        }
    </script>

    @if (!string.IsNullOrEmpty(Model.Message))
    {
        <script>
            setTimeout(() => {
                window.location.href = '/SignIn';
            }, 9000);
        </script>
    }
</head>
<body>
    <div id="root">
        <div class="app-layout-blank flex flex-auto flex-col h-[100vh]">
            <div class="h-full flex flex-auto flex-col justify-between">
                <main class="h-full">
                    <div class="page-container relative h-full flex flex-auto flex-col">
                        <div class="grid lg:grid-cols-3 h-full">
                            <!-- Left Panel -->
                            <div class="bg-no-repeat bg-cover py-6 px-16 flex-col justify-between hidden lg:flex" style="background-image: url('img/others/auth-side-bg.jpg');">
                                <div class="logo">
                                    <img src="~/img/logo/logo-dark-full.png" alt="Logo" />
                                </div>
                                <div>
                                    <div class="mb-6 flex items-center gap-4">
                                        <span class="avatar avatar-circle avatar-md border-2 border-white">
                                            <img class="avatar-img avatar-circle" src="~/img/avatars/thumb-10.png" loading="lazy" />
                                        </span>
                                        <div class="text-black">
                                            <div class="font-semibold text-base">Nguyen Trung Thanh</div>
                                            <span class="opacity-80">CTO, Onward</span>
                                        </div>
                                    </div>
                                    <p class="text-lg text-black opacity-80">Don't worry, just one more step.</p>
                                </div>
                                <span class="text-black">© 2025 <span class="font-semibold">Copied by Trung Thanh</span></span>
                            </div>

                            <!-- Right Panel -->
                            <div class="col-span-2 flex flex-col justify-center items-center bg-white dark:bg-gray-800">
                                <div class="xl:min-w-[450px] px-8">
                                    <div class="mb-8">
                                        <h3 class="mb-1">Set new password</h3>
                                        <p>Your new password must be different from the previous one.</p>
                                        <p>Password must contain at least one uppercase letter and one special character.</p>
                                    </div>

                                    <form method="post">
                                        <div class="form-container vertical">
                                            <!-- Password -->
                                            <div class="form-item vertical">
                                                <label class="form-label mb-2">Password</label>
                                                <div class="relative">
                                                    <input asp-for="Password" type="password" id="passwordInput" class="input w-full pr-10" placeholder="Password" />
                                                    <button type="button" class="absolute top-2 right-2" onclick="togglePassword('passwordInput', 'eyeIcon1')">
                                                        <svg id="eyeIcon1" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24"
                                                             height="1.2em" width="1.2em" xmlns="http://www.w3.org/2000/svg">
                                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                                  d="M13.875 18.825A10.05 10.05 0 0112 19
                                                                     c-4.478 0-8.268-2.943-9.543-7
                                                                     a9.97 9.97 0 011.563-3.029m5.858.908
                                                                     a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242
                                                                     M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29
                                                                     M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5
                                                                     c4.478 0 8.268 2.943 9.543 7
                                                                     a10.025 10.025 0 01-4.132 5.411m0 0L21 21" />
                                                        </svg>
                                                    </button>
                                                </div>
                                                <span asp-validation-for="Password" class="text-red-500 text-sm"></span>
                                            </div>

                                            <!-- Confirm Password -->
                                            <div class="form-item vertical">
                                                <label class="form-label mb-2">Confirm Password</label>
                                                <div class="relative">
                                                    <input asp-for="ConfirmPassword" type="password" id="confirmInput" class="input w-full pr-10" placeholder="Confirm Password" />
                                                    <button type="button" class="absolute top-2 right-2" onclick="togglePassword('confirmInput', 'eyeIcon2')">
                                                        <svg id="eyeIcon2" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24"
                                                             height="1.2em" width="1.2em" xmlns="http://www.w3.org/2000/svg">
                                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                                  d="M13.875 18.825A10.05 10.05 0 0112 19
                                                                     c-4.478 0-8.268-2.943-9.543-7
                                                                     a9.97 9.97 0 011.563-3.029m5.858.908
                                                                     a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242
                                                                     M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29
                                                                     M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5
                                                                     c4.478 0 8.268 2.943 9.543 7
                                                                     a10.025 10.025 0 01-4.132 5.411m0 0L21 21" />
                                                        </svg>
                                                    </button>
                                                </div>
                                                <span asp-validation-for="ConfirmPassword" class="text-red-500 text-sm"></span>
                                            </div>

                                            <button class="btn btn-solid w-full mt-4" type="submit">Submit</button>

                                            @if (!string.IsNullOrEmpty(Model.Message))
                                            {
                                                <p class="text-green-600 text-sm mt-4 text-center">@Model.Message</p>
                                            }

                                            <div class="mt-4 text-center">
                                                <span>Back to </span>
                                                <a class="text-primary-600 hover:underline" href="/SignIn">Sign In</a>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
    </div>
    <partial name="_ValidationScriptsPartial" />
</body>
</html>
